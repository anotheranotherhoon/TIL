
# JWT의 종류
## 토큰 기반 인증의 장점
1. Statelessness & Scalability (무상태성 & 확장성)
* 서버는 클라이언트에 대한 정보를 저장할 필요 X
* 토큰을 헤더에 추가함으로 인증절차 완료

2. 안정성
* 암호화 한 토큰을 사용
* 암호화 키를 노출 할 필요 X

3. 어디서나 생성 가능
* 토큰을 생성하는 서버가 꼭 토큰을 만들지 않아도 된다.

4. 권한 부여에 용이
* 토큰의 payload(내용물)안에 어떤 정보에 접근 가능한지 정의
* ex) 사진과 연락처 사용권한 부여/ 사진 권한만 부여/ 연락처 권한만 부여



* JWT는 두 가지 종류의 토큰을 이용해 인증을 구현한다.
1. 액세스 토큰(Access Token)
2. 리프레시 토큰(Refresh Token)

* 액세스 토큰은 보호된 정보들에 접근할 수 있는 권한 부여에 사용한다.
* 클라이언트가 처음 인증을 받게 될 때(로그인 시), 액세스 토큰, 리프레시 토큰 두가지를 다 받지만, 실제로 권한을 얻는데 사용하는 토큰은 액세스 토큰이다.

* 권한을 부여 받는데엔 액세스 토큰만 가지고 있으면 된다. 
* 하지만 액세스 토큰을 탈취 당할 경우 서버에 여러가지 요청을 보내 보호된 정보들에 접근할 수 있게 된다.
* 따라서 액세스 토큰에는 비교적 짧은 유효기간을 주어 토큰을 탈취하더라도 오랫동안 사용할 수 없도록 하는 것이 좋다.

## 리프레쉬 토큰
* 유효기간이 긴 리프레시 토큰을 탈취 당할 경우 액세스 토큰을 다시 발급받을 수 있기 때문에 문제가 발생한다.
* 그렇기 때문에 유저의 편의보다 정보를 지키는 것이 더 중요한 웹사이트들은 리프레시 토큰을 사용하지 않는 곳이 많다. 


## 2. Refresh Token과 Access Token의 차이를 이해한다. 
* Access Token(JWT)를 통한 인증 방식의 문제는 만일 제 3자에게 탈취당할 경우 보안에 취약하다는 점이다.
* 유효기간이 짧은 Token의 경우 그만큼 사용자는 로그인을 자주 해서 새롭게 Token을 발급받아야 하므로 불편하다. 
* 그러나 유효기간을 늘리자면, 토큰을 탈취당했을 때 보안에 더 취약해지게 됩니다. 
* 이때 “그러면 유효기간을 짧게 하면서 좋은 방법이 있지는 않을까?”라는 질문의 답이 바로 "**Refresh Token**"이다. 

## 2-1.Refresh Token
* Access Token과 똑같은 형태의 JWT다.
* 처음에 로그인을 완료했을 때 Access Token과 동시에 발급되는 Refresh Token은 긴 유효기간을 가지면서 Access Token이 만료됐을 때 새로 발급해주는 열쇠가 된다. (여기서 만료는 유효기간이 지났다는 의미이다.)

### 2-2.사용 에시
* Refresh Token의 유효기간은 2주, Access Token의 유효기간은 1시간이라면
* 1시간후 가지고 있던 Access Token은 만료됩니다. 
* 그러면 Refresh Token의 유효기간 전까지는 Access Token을 새롭게 발급받을 수 있다.
* Refresh Token의 유효기간이 만료됐다면, 사용자는 새로 로그인해야 합니다.
* Refresh Token도 탈취될 가능성이 있기 때문에 적절한 유효기간 설정이 필요하다.



> 참고 https://tansfil.tistory.com/59
 