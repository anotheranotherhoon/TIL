# useEffect
> * React는 Side Effect를 다루기 위한 Hook인 Effect Hook을 제공합니다.
> * Hook은 React 16.8에 새로 추가된 기능이다. Hook
## useEffect 사용법

## useEffect의 첫 번째 인자
* useEffect의 첫 번째 인자는 함수이다. 해당 함수 내에서 side Effect를 실행하면 된다.


## useEffect의 두 번째 인자
* useEffect의 두 번쨰 인자는 배열이다. 
    * 이 배열은 조건을 담고 있다. 
    * 여기서 조건은 boolean 형태의 표현식이 아니다.
    * 어떤 값의 변경이 일어날 때를 의미한다.
    * 따라서 해당 배열에는 어떤 값의 목록이 들어간다.
    * 이 배열을 종속성 배열이라 부른다.
```
useEffect(함수, [종속성1, 종속성2, ...])
```
* useEffect의 두 번째 인자는 종속성 배열이다. 
* 배열 내의 종속성1, 또는 종속성2의 값이 변할 때, 첫 번째 인자의 함수가 실행된다.

## useEffect의 return(뒷정리 함수)
* 컴포넌트가 언마운트 되기 전이나, 업데이트 되기 직전에 어떠한 함수를 실행하고 싶다면 뒷정리(cleanUp) 함수를 반환(return)해주어야한다.
```
useEffect(() => {
    console.log(`언제 찍힐까 ${filter}`)
    const result = getProverbs();
    setProverbs(result);

    return () => {
      console.log(filter);
    };
  }, [filter]);
```
* 이렇게 할 경우 처음 렌더링 시에 "언제찍힐까" 가 찍히고 [filter]값 즉 입력 값이 바뀔 때
* 이전에 filter값이 찍히고 곧 바로 새로 입력된 filter에 의해 `언제 찍힐까 ${filter}` 값이 찍힌다.


## Effect hook이 실행되는 순간
* 컴포넌트 생성 후 처음 화면에 렌더링(표시)
* 컴포넌트에 새로운 props가 전달되면 렌더링
* 컴포넌트에 상태(state)가 바뀌면 렌더링

위의 세 경우와 같이 매번 새롭게 컴포넌트가 렌더링 될 때 Effect Hook이 실행된다.

## Hook을 쓸 때 주의할 점 
* 최상위에서만 Hook을 호출한다.
* React 함수 내에서 Hook을 호출한다.

## 단 한번만 실행되는 Effect 함수
* 만일 두 번째인자(종속성 목록)에 아무런 종속성도 없다면 즉, 두 번째 인자를 빈 배열 []로 둘 경우에 컴포넌트가 처음 생성될 때만 effect함수가 실행된다. 

* 만약에 두 번쨰 인자에 아무것도 넣지 않는다면 컴포넌트가 처음 생성될 때, props가 업데이트 되거나, state가 업데이트 될때 effect 함수가 실행된다.


## 예시
```
1.
useEffect(() => {
    console.log("hello")
})

2.
useEffect(() => {
    console.log("hello")
},[])

3.
useEffect(() => {
    console.log("hello")
},[dep])
```

* 1번의 경우 컴포넌트가 처음 생성되거나, prop가 업데이트 되거나, state가 업데이트 될 때 마다 실행된다.

* 2번의 경우 컴포넌트가 처음 생성될 때만 함수가 실행된다.

* 3번의 경우 컴포넌트가 처음 생성 될 때 함수가 실행되고 그 이후에 dep이 업데이트 될 때 마다 실행된다.

## 정리

* 두 번쨰 인자가 없는 경우
    * 컴포넌트 생성 후 처음 화면에 렌더링(표시)
    * 컴포넌트에 새로운 props가 전달되면 렌더링
    * 컴포넌트에 상태(state)가 바뀌면 렌더링

* 두 번쨰 인자가 []인 경우 첫 렌더링시 단 한번만 effect함수가 호출된다.

* 두 번째 인자에 종속성 배열이 존재할 경우에도 무조건 최초의 경우 첫번쨰 인자(effect 함수)가 한번은 실행된다. 

* 그 다음 부터 종속성 배열의 값 중 하나라도 변경될 경우에 첫 번째 인자 즉 effect함수가 실행된다. (오늘 이거 때문에 엄청 고생했다. 최초의 한번 찍히는걸 잊지 말자)