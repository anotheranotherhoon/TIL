# TCP vs UDP
* IP 패킷의 한계를 보완하려면 어떻게 해야할까.

## OSI 7계층과 TCP/IP 4계층

* OSI 7계층과 TCP/IP 4계층

|OSI 7 계층|종류|TCP/IP 계층|
|------|---|---|
|응용 계층|HTTP, DNS, SSL, SMTP, FTP|어플리케이션 계층
|표현 계층|GIF, JPEG, MPEG, MIME, ZIP, ASCII|''|
|세션 계층|RPC, SQL, NETBOIS, Sockets|''|
|전송 계층|TCP, UDP, NETBEUI|전송계층|
|네트워크 계층|IP, ICMP|인터넷 계층|
|데이터 링크 계층|FDDI, Ethernet, PPP|네트워크 인터페이스 계층|
|물리 계층|CDMA, GSM, NICs, CSMA/CD, Fiber|''|

* IP 프로토콜보다 더 높은 계층에 TCP 프로토콜이 존재하기 때문에 앞서 다룬 IP 프로토콜의 한계를 보완할 수 있다.
* TCP/IP 4 계층은 OSI 7계층 보다 먼저 개발되었으며 TCP/IP 프로토콜의 계층은 OSI 모델의 계층과 정확하게 일치하지는 않는다.
* 실제 네트워크 표준은 업계 표준을 따르는 TCP/IP 계층에 가깝다.

## 예시
* 프로그램이 네트워크에서 데이터를 송수신할 수 있도록, "네트워크 환경에 연결할 수 있게 만들어진 연결부"가 바로 네트워크 소켓(Socket)이다.

## TCP/IP 패킷

* TCP 세그먼트에는 IP 패킷의 출발지IP와 목적지 IP, 정보를 보완할 수 있는 출발지 PORT, 목적ㄹ지 PORT, 정송제어, 순서, 검증 정보 등을 포함한다.

## TCP 특징 <sup>전송 제어 프로토콜(Transmission Control Protocol)</sup>
* 연결 지향 - TCP 3 way handshake(가상 연결)
* 데이터 전달 보증
* 순서 보장
* 신뢰할 수 있는 프로토콜

TCP는 같은 계층에 속한 UDP 에 비해 상대적으로 신뢰할 수 있는 프로토콜이다.

### 연결 지향 - TCP 3 way handshake
* TCP는 장치들 사이에 논리적인 접속을 성립하기 위해 3 way handshake를 사용하는 연결지향 프로토콜이다.

* 연결 방식
    * 클라이언트는 서버에 접속을 요청하는 SYN 패킷을 보낸다.
    * 서버는 SYN 요청을 받고 클라이언트에게 요청을 수락한다는 ACK와 SYN가 설정된 패킷을 발송하고 클라이언트가 다시 ACK로 응답하기를 기다린다.
    * 클라이언트가 서버에게 ACK을 보내면 이 이후로부터 연결이 성립되며 데이터를 전송할 수 있다.
    * 만약 서버가 꺼져있다면 클라이언트가 SYN을 보내고 서버에서 응답이 없기 때문에 데이터를 보내지 않는다.
    * 현재에는 최적화가 이루어져 3번 ACK을 보낼때 데이터를 함께 보내기도 합니다. 
    * SYN<sup>Synchronize</sup> , ACK<sup>Acknowledgment승인</sup>

TCP는 데이터 전송이 성공적으로 이루어진다면 이에 대한 응답을 돌려주기 때문에 IP 패킷의 한계인 **비연결성을** 보완할 수 있다.

만약 패킷이 순서대로 도착하지 않는다면 TCP 세그먼트에 있는 정보를 토대로 다시 패킷전송을 요청할 수 있다. 이를 통해 IP 패킷의 한계인 **비신뢰성**(순서를 보장하지 않음)을 보완할 수 있다.


## UDP<sup>사용자 데이터그램 프로토콜 User Datagram Protocol</sup> 특징
* 하얀 도화지에 비유(기능이 거의 없다)
* 비 연결지향 - TCP 3 way handshake ❌
* 데이터 전달 보증 ❌
* 순서 보장 ❌
* 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름
* 신뢰성보다 연속성이 중요한 서비스(e.g 실시간 스트리밍)에 자주 사용됨

<section>UDP는 IP 프로토콜에 PORT, 체크섬 필드 정보만 추가된 단순한 프로토콜이다.<br><br>앞서 TCP 특징과 비교해 보면 신뢰성은 낮지만 3 way handshake 방식을 사용하지 않기 때문에 TCP와 비교해 빠른 속도를 보장한다.<br><br>HTTP3는 UDP를 사용하며 이미 여러 기능이 구현된 TCP 보다는 하얀 도화지처럼 커스터마이징이 가능하다는 장점이 있다. 
</section>
